services:
  mcp-server:
    build: ./services/mcp-server
    image: mcp-server:dev
    env_file:
      - .env
    environment:
      - PYTHONUNBUFFERED=1
    volumes:
      - ./runs:/app/runs
    ports:
      - "8080:8080"
    restart: unless-stopped

  contributor-agent:
    build: ./services/contributor-agent
    image: contributor-agent:dev
    env_file:
      - .env
    environment:
      - PYTHONUNBUFFERED=1
      - MCP_SERVER_URL=http://mcp-server:8080
    volumes:
      - ./runs:/app/runs
    depends_on:
      - mcp-server
    restart: unless-stopped
